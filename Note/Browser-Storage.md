# 브라우저 저장소에 대해서 차이점을 설명해 주세요. (Localstaorage, SessionStorage, Cookie)

브라우저 저장소는 크게 쿠키와 웹 스토리지로 나눌 수 있다.

<img src="https://github.com/moeyg/Front-end-Knowledge/blob/981fc440507bd2107748655a0a45288e1ce95c49/Images/Browser-Storage/Browser-Storage-1.png" width="800px" />
 우선, 사이트에 방문하면 브라우저는 서버에 요청을 보내고 서버는 이에 응답하는데, 이 응답에는 모든 데이터와 페이지 정보 그리고 유통기한이 있는 쿠키가 담겨있다.

 여기서 쿠키는 이름, 값, 속성(이름/값)이 들어있는 것으로, 속성 안에 쿠키 만료 기간, 도메인 등의 정보가 올 수 있다.

<img src="https://github.com/moeyg/Front-end-Knowledge/blob/981fc440507bd2107748655a0a45288e1ce95c49/Images/Browser-Storage/Browser-Storage-2.png" width="800px" />
 사용자가 해당 사이트에 재방문시, 쿠키는 요청과 함께 서버로 보내지고, 쿠키의 내용에 따라 서버는 기억해 둔 정보를 제공한다.

 쿠키는 로그인 창을 자동완성 하거나, 공지 메시지를 하루 안 보게 하거나, 쇼핑몰 사이트에서 로그인을 하지 않은 채 장바구니에 물건을 담을 수 있는 등의 사용자의 편의성 정보들을 저장한다. 즉, 삭제되거나 조작되거나 가로채어도 큰 일은 없을 수준의 정보들을 브라우저에 저장하는데 사용된다.

> **🍪 쿠키의 목적 3가지 🍪**

     1. 세션 관리 : 서버에 저장해야 할 로그인, 장바구니 등의 정보 관리
     2. 개인화 : 사용자 선호, 테마 등의 정보 관리
     3. 트레킹 : 사용자 행동을 기록하고 분석하기 위한 정보 관리
> 

 웹사이트에서 쿠키를 설정하면, 이후 모든 요청은 쿠키 정보를 포함하여 서버로 전송된다. 쿠키는 개수와 용량에 제한이 있다. 클라이언트에 따라 최대 300개의 쿠키를 저장할 수 있으며, 하나의 사이트에서는 최대 20개를 저장할 수 있다. 또한 하나의 쿠키값은 4KB로 제한되어 있다. 물론 하위키를 이용하면 제한을 일부 해소할 수 있으나, 대용량으로 쿠키를 사용하는 것은 불필요한 트래픽을 발생시킬 수 있다.

 또한 쿠키는 만료일자를 설정하지 않으면 세션 쿠키로, 설정하면 지속적 쿠키로 간주된다. 세션 쿠키의 경우 메모리에 저장이 되어 브라우저가 닫히면 삭제된다. 반면 지속적 쿠키의 경우 디스크에 저장되어 임의로 삭제하거나 만료일이 될 때까지는 데이터가 저장된다.

 쿠키의 장점으로는 대부분의 브라우저가 지원을 한다는 점이있다. 단점으로는 4KB의 데이터 저장 제한으로 사이즈가 매우 작고, 서버에 매번 HTTP 요청을 하여 데이터 전달 낭비가 발생하고, HTTP 요청에 암호화 되지 않은 상태로 사용하기 때문에 보안에 취약한 점이있다.

 웹 스토리지는 HTML5부터 제공하는 기능으로, 키/값의 구조로 데이터를 저장하고 키를 기반으로 데이터를 조회할 수 있으며, 도메인 마다 생성된다. 오직 string 데이터 타입만 지원하기 때문에 키/값 모두 문자열로 변환된다.

<img src="https://github.com/moeyg/Front-end-Knowledge/blob/981fc440507bd2107748655a0a45288e1ce95c49/Images/Browser-Storage/Browser-Storage-3.png" width="500px" />
 또한 서버로 정보를 보내는 것이 아니라 클라이언트 측에 저장하는 것이기 때문에 불필요한 트래픽을 낮출 수 있다.
 또한 문자열 기반 데이터 외에 자바스크립트 객체의 복사본을 문자열로 변환하여 저장할 수 있다. 이는 개발의 편의성을 제공해주는 장점이 있다. 단, 브라우저가 HTML5를 지원하는지 확인해야 한다.
 웹 스토리지는 용량에 제한이 없으며(하지만 표준 한 페이지당 5MB로 권장된다.), 영구 저장소(로컬 스토리지)와 임시 저장소(세션 스토리지)를 따로 두어 데이터의 지속성을 구분해 응용 환경에 맞는 선택이 가능하다. 또한, 오리진(도메인,프로토콜,포트) 단위로 접근이 제한되는 특성 덕분에 CSRF로 부터 안전하다.

 따라서 웹 스토리지는 영구성을 기준으로 로컬 스토리지와 세션 스토리지로 나뉜다.

 로컬 스토리지는 저장한 데이터를 명시적으로 지우지 않는 이상 영구적으로 보관이 가능하다. 또한 도메인이 다르면 서로의 로컬 스토리지에 접근할 수 없다. 즉, 쿠키를 이용한 사이트 고유 설정 정보 등을 대신하기에 적합하다.

 반면 세션 스토리지는 같은 탭에서 새로고침 시에는 데이터가 유지되지만, 브라우저를 닫거나 새 탭을 열 때 데이터가 초기화 된다. 자동 임시 저장 용도로 쓰이는데 예를 들어 글쓰기 도중 내용 복구하기, 비로그인 장바구니 등이 있다.

## 정리

  브라우저 저장소는 크게 쿠키와 웹 스토리지로 나눌 수 있습니다. 우선, 웹사이트에 방문하면 브라우저와 서버 사이에 매번 쿠키가 포함되어 응답과 요청이 전송 됩니다.

 쿠키는 대부분의 브라우저가 지원을 합니다. 하지만 데이터 저장 제한으로 사이즈가 매우 작고, 매번 요청을 하기 때문에 데이터 전달 낭비가 발생하고, 암호화 되지 않은 상태로 요청하기 때문에 보안에 취약한 점이 있습니다.

 반면, 웹 스토리지는 HTML5부터 제공하는 기능입니다. 키/값의 구조로 데이터를 저장하기 때문에 키를 기반으로 데이터를 조회할 수 있습니다.

 쿠키와 가장 큰 차이점은 테이터를 전송하지 않고 클라이언트 측에 저장하는 것이기 때문에 불필요한 트래픽을 낮출 수 있습니다. 이러한 점에서 보안 문제도 해결할 수 있습니다.

 웹 스토리지는 데이터의 지속성 여부를 기준으로 로컬 스토리지와 세션 스토리지로 나뉩니다. 로컬 스토리지는 저장한 데이터를 명시적으로 지우지 않는 이상 영구적으로 보관이 가능합니다. 반면 세션 스토리지는 같은 탭에서 새로고침 시에는 데이터가 유지되지만, 브라우저를 닫거나 새 탭을 열 때 데이터가 초기화 됩니다.
